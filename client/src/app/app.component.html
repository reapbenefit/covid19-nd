<div *ngIf="!isMobile">
  <div class="wrapper">
    <!-- Sidebar  -->
    <nav id="sidebar" [ngClass]="status ? '' : ''" *ngIf="false">
      <ul class="list-unstyled components" style="margin-bottom: 0 !important;">
        <div class="row"
          style="display: flex;justify-content: center;margin-right: -10px !Important;background-color: #009688;">
          <img src="./assets/Icons/reapbenefit.png" style="width: 120px;height: 45px">
        </div>
        <!-- <div class="row" style="display: flex;justify-content: center;margin-top: 0.5rem;padding-bottom: 5px;">
        <span style="color: white;font-size: 16px;">Neighbourhood Dashboard</span>
      </div> -->
        <div class="row" style="margin:0;margin-top: 0.5rem;">
          <!-- <input placeholder="search for location" autocorrect="off" autocapitalize="off" spellcheck="off" type="text"
            class="form-control searchInput" #search [formControl]="searchControl" (input)="searchText($event)"
            style="padding-right: 1.3rem;"> -->
          <!-- <i class="fa fa-times clearSearch cursor" (click)="ClearSearch()" aria-hidden="true"></i> -->
          <!-- <i class="fa fa-search" id="SeachIcon" [ngClass]="status ? '' : 'searchIcon'" aria-hidden="true"></i> -->
        </div>
        <li *ngIf="ShowCitySelect">
          <span>City</span>
          <!-- <select class="form-control" (change)="SelectCity($event.target.value)">
          <option *ngFor="let city of cities" [value]="city.id">{{city.name}}</option>
        </select> -->
          <!-- <ngx-select-dropdown (change)="SelectCity($event)" [multiple]="false" [(ngModel)]="CitySelected"
            [config]="configCity" [options]="cities"></ngx-select-dropdown> -->
        </li>
        <li *ngIf="ShowWardSelect && false">
          <span>Ward</span>
          <ngx-select-dropdown (change)="WardSelectedEvent($event)" [multiple]="false" [(ngModel)]="WardSelected"
            [config]="configWard" [options]="Wards"></ngx-select-dropdown>
        </li>
        <div class="row" style="margin: 0;" *ngIf="false">
          <div class="col-lg-12 vercenter" style="border: 1px solid white;background: white;color: grey;">
            <div class="row" style="padding: 0;font-size: 10px;">
              <div class="col-lg-12">
                Ward Id: {{wardID}}
              </div>
              <div class="col-lg-12">
                Ward Name: {{wardName}}
              </div>
              <div class="col-lg-12">
                Corporator Name: {{corporatorName}}
              </div>
              <div class="col-lg-12">
                Contact: {{corporatorPhone}}
              </div>
            </div>
            <!-- <span style="font-size: 11px;" *ngIf="wardName != undefined">Ward Id :{{wardID}} &nbsp;Ward Name
            :{{wardName}} &nbsp;Corporator Name: {{corporatorName}} &nbsp;Contact : {{corporatorPhone}}</span> -->
          </div>
        </div>
        <!-- <li>
                  <span>Ward</span>
                  <select class="form-control" (change)="SelectWard($event.target.value)">
                    <option *ngFor="let Ward of Wards" [value]="Ward">{{Ward}}</option>
                  </select>
                </li> -->
        <div class="row" style="margin: 0px;" *ngIf='false'>
          <div class="col-lg-12" style="padding: 0;padding-top: 0.5rem;" *ngFor="let menuData of MenuData">
            <div class="row" style="margin: 0;" *ngIf='menuData.buttonType == "1"'>
              <span>{{menuData.name}}</span>
              <select class="form-control" (change)="SingleSelectMenuDropDown($event,menuData.menuId)">
                <option [disabled]="menuData.subMenus.length == 0">No Data</option>
                <option value="Select" *ngIf="menuData.subMenus.length > 0">Select</option>
                <option value="subMenuItems.submenuId" *ngFor="let subMenuItems of menuData.subMenus">
                  {{subMenuItems.submenu}}</option>
              </select>
            </div>
            <div class="row" style="margin: 0;" *ngIf='menuData.buttonType == "2"'>
              <span>{{menuData.name}}</span>
              <ngx-select-dropdown (change)="MenuMultiSelect($event,menuData.menuId)" [multiple]="true"
                [config]="config" [options]="menuData.subMenus"></ngx-select-dropdown>
            </div>
            <div class="row" style="margin: 0;" *ngIf='menuData.buttonType == "3"'>
              <input type="radio" id="{{menuData.name}" name="optradio" (change)="MenuRadioSelect($event,menuData.menuId)" /><span
            class="margLeft">{{menuData.name}}</span>
          </div>
        </div>
      </div>
      <div class=" row" style="padding-top: 1rem;" *ngIf="showMenuItems">
              <!-- <div class="col-lg-12" *ngFor="let menuItem of MenuItems;let menuIndex = index;">
                <ngx-treeview [config]="configMenu" [items]="menuItem"
                  (selectedChange)="TreeMenuItemsSelect($event,menuItem)">
                </ngx-treeview>
              </div> -->
            </div>

            <!-- Old Menu -->
            <div class="row"
              style="margin:0;display: flex;justify-content: center;color: white;align-items: flex-end;margin-top: 0.5rem;">
              <div class="col-lg-6 col-xs-12" style="display: flex;justify-content: center;">
                <span class="vercenter" (click)="open(content,'About_Us')"
                  style="padding-left: 10px; cursor: pointer;text-decoration: underline;">About_Us</span>
              </div>
              <div class="col-lg-6 col-xs-12" style="display: flex;justify-content: center;">
                <span class="vercenter" (click)="open(FAQ,'FAQ')"
                  style="padding-left: 10px; cursor: pointer;text-decoration: underline;">FAQ</span>
              </div>
            </div>
            <div class="row" style="margin: 0;display: flex;justify-content: center;margin-top: 0.5rem;">
              <!-- <button class="btn btn-primary" (click)="SubscribeToInsights()" style="height: 25px;background-color: #ff491d;padding-top: 0;"> -->
              <!-- </button> -->
              <span (click)="SubscribeToInsights()"
                style="cursor: pointer;text-decoration: underline;font-size: 16px;">Subscribe to Insights</span>
            </div>
            <div class="row" style="margin: 0;display: flex;justify-content: center;margin-top: 0.5rem;">
              <span (click)="FeedBack()"
                style="cursor: pointer;text-decoration: underline;font-size: 16px;">FeedBack</span>
            </div>
            <!-- <div class="row" style="margin:0;justify-content: center;">
        <button class="btn btn-primary" (click)="NeighbourhoodForum()"
          style="width: 93%;height: 25px;padding: 0;background-color: #ff9900 !IMPORTANT;">
          <span style="color:white;">Neighbourhood Forum</span>
        </button>
      </div> -->
      </ul>
    </nav>

    <div id="content" *ngIf="ShowForum">
      <div class="row">
        <div class="col-lg-12">
          <div style="text-align: end;">
            <span (click)="closeForum('Forum')" title="Close Forum" style="cursor: pointer;"><i class="fa fa-times"
                aria-hidden="true" style="font-size: 18px;color: red"></i></span>
          </div>
        </div>
        <div class="col-lg-12">
          <iframe id='ForumSrc' frameborder="0" style="height: calc(100vh - 35px);;width: 100%"></iframe>
        </div>
      </div>
    </div>
    <div id="content" *ngIf="ShowAnalytics">
      <div class="row">
        <div class="col-lg-12">
          <div style="text-align: end;">
            <span (click)="closeForum('Analytics')" title="Close Forum" style="cursor: pointer;"><i class="fa fa-times"
                aria-hidden="true" style="font-size: 18px;color: red"></i></span>
          </div>
        </div>
        <div class="col-lg-12">
          <iframe
            src="http://internaldashboard.solveninja.org:4000/public/dashboard/07b9f145-5be8-4206-942e-7251e15791d9"
            frameborder="0" style="height: calc(100vh - 35px);;width: 100%"></iframe>
        </div>
      </div>
    </div>
    <!--Map Page Content  -->
    <div id="content" *ngIf="!ShowForum && !ShowAnalytics">

      <div class="ra-header">

        <div class="row">
          <div class="col-md-1">
            <div class="ra-logo">
              <!-- <img src="./assets/Icons/reapbenefit.png"> -->
            </div>
          </div>
          <div class="col-md-3">
            <h5 class="web-title">Covid Neighbourhood Dashboard</h5>
          </div>
          <div class="col-md-4">
            <div [ngStyle]="{'visibility': defaultpage == 'LocalData'? 'visible': 'hidden'}">
              <div class="ra-citysearch-web">
                <ngx-select-dropdown (change)="SelectCity($event)" [multiple]="false" [(ngModel)]="CitySelected"
                  [config]="configCity" [options]="cities"></ngx-select-dropdown>
              </div>
              <span style="font-size: 10px;margin: 0 8px;position: relative;top: 7px;">( OR )<span></span></span>
              <div class="ra-locationsearch-web">
                <input placeholder="Select location" autocorrect="off" autocapitalize="off" spellcheck="off" type="text"
                  class="searchInput" #search [formControl]="searchControl" (input)="searchText($event)"
                  style="padding-right: 1.3rem;">
                <i class="fa fa-search" id="SeachIcon" aria-hidden="true"></i>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="links">

              <a href="JavaScript:Void(0)" (click)="defaultpage = 'Home'"
                [ngClass]="{'active': defaultpage == 'Home'}">Home</a>
              <a href="JavaScript:Void(0)" (click)="pageLocaLData()"
                [ngClass]="{'active': defaultpage == 'LocalData'}">Show Map</a>
              <a href="JavaScript:Void(0)" (click)="zones()"
                [ngClass]="{'active': defaultpage == 'Zones'}">Manage Zones</a>

              <a *ngIf="!(activeRole.indexOf('NGOUser') !=-1 || activeRole.indexOf('NGOTeam') !=-1 || activeRole.indexOf('NGOAdmin') !=-1)"
                target="_blank" href="https://discourse.solveninja.org/tag/local-schemes">Local Schemes</a>

              <a *ngIf="(activeRole.indexOf('NGOAdmin') !=-1)" target="_blank"
                href="http://internaldashboard.solveninja.org:4000/public/dashboard/65ea5995-d9cb-4fd7-82c1-07d095291aba">Analytics</a>

              <a href="JavaScript:void(0)">
                <span class="headerlink">Contribute <span class="arrowme fa fa-angle-down"></span></span>
                <div class="onhover">

                  <li>
                    <a href="https://ee.kobotoolbox.org/x/#SPEoN8QZ" target="_blank">Join Local Support Network</a>
                  </li>

                  <a *ngIf="(activeRole.indexOf('NGOUser') !=-1 || activeRole.indexOf('NGOTeam') !=-1 || activeRole.indexOf('NGOAdmin') !=-1)"
                    target="_blank" href="https://discourse.solveninja.org/tag/local-schemes">Local Schemes</a>

                  <a *ngIf="!(activeRole.indexOf('NGOAdmin') !=-1)" target="_blank"
                    href="http://internaldashboard.solveninja.org:4000/public/dashboard/65ea5995-d9cb-4fd7-82c1-07d095291aba">Analytics</a>

                  <a href="JavaScript:void(0)" (click)="NeighbourhoodMultilingulSelfAssessment()">Multilingual Self
                    Assessment</a>
                  <a target="_blank" href="https://covidselfcheck.app/">Self Assessment </a>

                  <a href="JavaScript:void(0)" (click)="NeighbourhoodData()">Social distancing </a>

                  <a href="JavaScript:void(0)" (click)="NeighbourhoodAnalytics()">Help Those In Need </a>
                  <a href="JavaScript:void(0)" (click)="toVolunteer()">Volunteer </a>

                </div>
              </a>

              <a href="JavaScript:Void(0)" *ngIf="!userName" (click)="userLogin()">Login</a>
              <a href="JavaScript:Void(0)" *ngIf="userName">
                <span class="headerlink Loged-inuser-web">Hi {{userName}}<span
                    class="arrowme fa fa-angle-down"></span></span>
                <div class="onhover" style="width: 144px !important;">
                  <a href="JavaScript:void(0)" (click)="LogoutMe()">Logout </a>
                </div>
              </a>

            </div>
          </div>
        </div>
      </div>

      <div class="landing-page" [ngStyle]="{'display': (defaultpage == 'Home')? 'block': 'none'}">
        <div class="banner">
          <img src="../assets/Icons/solveninja-about.png" alt="">
        </div>
        <div class="des-part" style="margin-bottom: 0px;">
          <div class="row" style="position: relative;top: -95px;">
            <div class="col-md-6" style="display: flex;flex-direction: column;margin: auto;">
              <div class="web-big-button" style="margin: auto;">
                <h3 class="text-center" style="font-weight: 300 !important;margin-bottom: 20px;margin-left: -10px;">Join
                  Hands With Us</h3>

                <ul class="web-big-button-icon-list">
                  <li>
                    <div (click)="NeighbourhoodData()">
                      <i class="fa fa-home"></i>
                      <span>Social distancing </span>
                    </div>
                  </li>
                  <li>
                    <div (click)="NeighbourhoodAnalytics()">
                      <i class="fa fa-handshake-o"></i>
                      <span>Refer a Needy</span>
                    </div>
                  </li>
                  <li>
                    <div (click)="toVolunteer()">
                      <i class="fa fa-hand-paper-o"></i>
                      <span>Volunteer </span>
                    </div>
                  </li>
                </ul>

                <a style="text-align: center;" href="JavaScript:void(0)" (click)="homepageButton2()">Help those in
                  need</a>
                <a style="text-align: center;" href="JavaScript:void(0)" (click)="homepageButton3()">Want to know where
                  you can get help?</a>

              </div>
            </div>
            <div class="col-md-6">
              <div class="web-view" style="margin-right: 20px;">
                <h6 class="web-sub-title-home">Data Found Near You</h6>
                <!-- Sub Categories count  Based on Selection-->
                <div class="hom-page-body animated fadeIn" style="margin-left: 0px !important;">
                  <div class="box">
                    <div class="title-b">Cities</div>
                    <span class="count">100</span>
                  </div>
                  <div class="box">
                    <div class="title-b">Schemes</div>
                    <span class="count">40</span>
                  </div>
                  <ng-template ngFor let-menuItems [ngForOf]="MenuItems">
                    <div class="box animate" [ngClass]="{'animatebox': getoverrallrectangleCountData.length == 0}"
                      *ngIf="menuItems[0].value == 120">
                      <div class="title-b">People supported with Partners</div>
                      <span
                        class="count">{{menuItems[0].overall_rec_count_total? (menuItems[0].overall_rec_count_total * 4): '0'}}</span>
                    </div>
                    <div class="box animate" [ngClass]="{'animatebox': getoverrallrectangleCountData.length == 0}"
                      *ngIf="menuItems[0].value == 101" style="order: 1">
                      <div class="title-b">People needing support</div>
                      <span
                        class="count">{{menuItems[0].overall_rec_count_total? (menuItems[0].overall_rec_count_total * 4): '0'}}</span>
                    </div>
                  </ng-template>
                </div>
                <!-- End Sub Categories count  Based on Selection-->

              </div>
            </div>
          </div>
        </div>
      </div>

      <div [ngStyle]="{'display': (defaultpage == 'LocalData')? 'block': 'none'}" class="web-map-wrapper"
        style="position: relative;top: 70px;">
        <!-- ra-custom-categories  -->
        <div class="ra-custom-categories">
          <div class="category" style="display: none !important;">
            <div class="" *ngFor="let menuItem of MenuItems;let menuIndex = index;">
              <ngx-treeview [config]="configMenu" [items]="menuItem"
                (selectedChange)="TreeMenuItemsSelect($event,menuItem)">
              </ngx-treeview>
            </div>
          </div>
        </div>
        <div class="ra-custom-categories" style="margin: 15px 10px;">
          <ul *ngFor="let menuItem of MenuItems;let menuIndex = index;" class="box">
            <li class="first-child-section">
              <div class="header-sec">
                {{menuItem[0].text}}
                <span class="count" *ngIf="getcounterCount(menuItem) != 0">{{getcounterCount(menuItem)}}</span>
              </div>
              <div class="body-sec">
                <div *ngIf="menuItem[0]?.internalChildren && menuItem[0]?.internalChildren.length" class="child-box">
                  <span class="selection-cnt">
                    <span class="" (click)="selectAll(menuItem)">Select</span> /
                    <span class="" (click)="deselectAll(menuItem)">Deselect all</span>
                  </span>
                  <ul>
                    <li class="child-list" *ngFor="let child of menuItem[0].internalChildren"
                      (click)="singleselect(child, menuItem)">
                      <span>{{child.text}}</span>
                      <span *ngIf="child.internalChecked" class="fa fa-check"></span>
                    </li>
                  </ul>
                </div>

              </div>
            </li>
          </ul>
        </div>
        <div class="lengents-details-wrapper" [ngClass]="{'collapseme': detail_legends_collapse}">
          <div class="lengents-details-box">
            <div class="collapse-button" [ngClass]="{'rotateleft': detail_legends_collapse}"
              (click)="detail_legends_collapse = !detail_legends_collapse"><span class="fa fa-chevron-up"></span>
            </div>
            <div class="full-details">
              <div class="static-point-section">
                <h5>In your view</h5>
                <app-role-filter [activeRole]="activeRole" (selectedTags)="zoneTagsSelected($event)">
                </app-role-filter>
                <ul>

                  <ng-template [ngIf]="userName && activeRole.indexOf('NGOTeam') !=-1">
                    <li class="yourview-order-0">
                      Relief requested {{ MenuItems | ratotalcounts: 'NGOTeam'}}
                    </li>
                  </ng-template>

                  <ng-template [ngIf]="userName && activeRole.indexOf('NGOAdmin') !=-1">
                    <li class="yourview-order-0">
                      Relief requested {{ MenuItems | ratotalcounts: 'NGOAdmin' }}
                    </li>
                  </ng-template>

                  <ng-template [ngIf]="!(activeRole.indexOf('NGOTeam') !=-1 ||  activeRole.indexOf('NGOAdmin') !=-1 )">

                    <ng-template ngFor let-menuItems [ngForOf]="MenuItems" let-i="index">
                      <li class="yourview-order-0" *ngIf="menuItems[0].value == 101">Families needing help
                        {{(menuItems[0]?.overall_rec_count_total != 0 && menuItems[0]?.overall_rec_count_total !=  undefined)? '('+menuItems[0]?.overall_rec_count_total+')': ' (not mapped)'}}
                      </li>
                      <li class="yourview-order-1" *ngIf="menuItems[0].value == 120">Successfully Supported
                        {{(menuItems[0]?.overall_rec_count_total != 0 && menuItems[0]?.overall_rec_count_total !=  undefined)? '('+menuItems[0]?.overall_rec_count_total+')': ' (not mapped)'}}
                      </li>
                      <li class="yourview-order-2" *ngIf="menuItems[0].value == 97">Resources Close By
                        {{(menuItems[0]?.overallcount_total != 0 && menuItems[0]?.overallcount_total != undefined )? '('+menuItems[0]?.overallcount_total+')': ' (not mapped)'}}
                      </li>
                      <li class="yourview-order-3" *ngIf="menuItems[0].value == 121">Volunteers Close By
                        {{(menuItems[0]?.overallcount_total != 0 && menuItems[0]?.overallcount_total != undefined )? '('+menuItems[0]?.overallcount_total+')': ' (not mapped)'}}
                      </li>
                    </ng-template>
                  </ng-template>
                </ul>

              </div>
              <div class="actiob-mode-dl">
                <a [ngClass]="{'active': legends_details == 'legends'}" href="JavaScript:void(0)"
                  (click)="legends_details = 'legends'">Legends</a>
                <a [ngClass]="{'active': legends_details == 'details'}" href="JavaScript:void(0)"
                  (click)="legends_details = 'details'; detail_list_number = 100">Details</a>
                
                  <a *ngIf="userName" [ngClass]="{'active': legends_details == 'mylist'}" href="JavaScript:void(0)" 
                  (click)="legends_details = 'mylist'; detail_list_number = 100">My Lists</a>
              </div>
              <div class="filter-g" *ngIf="legends_details == 'details' && mapData?.length">
                <input type="text" placeholder="Search place" [(ngModel)]="filterdetailsvalue">
              </div>

              <h5 *ngIf="legends_details == 'mylist' && userName"  class="ass-closed-count">Assignments closed <span> ({{total_cosed_Asss}})</span></h5>
              <h5 *ngIf="legends_details == 'mylist' && userName"  class="ass-closed-count">Pending Assignments <span> </span></h5>

              <div class="ra-custom-google"
                (scroll)="detail_list_number = (mapData?.length >= detail_list_number)? (detail_list_number + 100): (detail_list_number)">
                
                <ng-template [ngIf]="legends_details =='legends'">
                  <div class="categories-box-g">
                    <ul class="webview-ra">
                      <ng-template ngFor let-menuItems [ngForOf]="MenuItems">
                        <ng-template ngFor let-items [ngForOf]="menuItems[0]['internalChildren']">
                          <li class="box " *ngIf="items.internalChecked && items.count !=0 && items.count != undefined">
                            <h5><img [src]="items.icon"
                                onerror="this.onerror=null; this.src='./assets/Icons/reapbenefit.jpg'"
                                title="{{items.subcategory}}">{{items.text}}</h5>
                            <div class="jest-count">
                              {{(items.count !=0 && items.count != undefined)? '('+items.count+')': ''}}</div>
                          </li>
                        </ng-template> 
                      </ng-template>
                      <li>
                        No Categories Selected
                      </li>
                    </ul>
                  </div>
                </ng-template>

                <ng-template [ngIf]="legends_details =='details'">
                  <ng-template [ngIf]="true">
                    <div class="result-g-box {{ i }}"
                      *ngFor="let item of mapData | inputsearch:filterdetailsvalue; let i = index">
                      <div style="cursor: pointer;" class="lat-details-g animated fadeInDown"
                        (click)="item[collapse] = !item[collapse]">
                        <h5 (click)="zoomToPlace(item, i)"><img class="title_icons" [src]="item.icon"
                            alt="">{{item.name}}
                        </h5>
                        <p>{{item.address}}</p>
                      </div>
                      <div class="lat-details-g moredetails" style="overflow: hidden">
                        <div class="animated fadeIn" *ngIf="item[collapse]">
                          <p *ngIf="item?.cityName"><b>City :</b> {{item?.cityName}}</p>
                          <p *ngIf="item?.wardName"><b>Ward :</b> {{item?.wardName}}</p>
                          <p *ngIf="item?.category"><b>Category :</b> {{item?.category}}</p>
                          <p *ngIf="item?.subcategory"><b>Subcategory :</b> {{item?.subcategory}}</p>
                          <p *ngIf="item?.lat"><b>Latitude :</b> {{item?.lat}}</p>
                          <p *ngIf="item?.lng"><b>Longitude :</b> {{item?.lng}}</p>
                          <p *ngIf="item?.lng"><b>Id :</b> {{item?.id}}</p>
                        </div>
                      </div>

                      <div class="closedby_user" *ngIf="item?.closed_by">
                        <div><span class="bold">Closed By: </span>{{item?.closed_by}}</div>
                        <div><span>{{item?.closed_at | date:'dd-MM-y h:mm'}}</span></div>
                      </div>

                      <div class="user-action" *ngIf="!item['numberPopup']">
                        <a [ngClass]="{'isDisabled': loaderAction}" class="animated fadeInDown user-action-a-a" (click)="assignme('assign', item)"
                          *ngIf="food_ration_asked.indexOf(item.menuId) != -1 && userName && allAssignedList.indexOf(item?.id) == -1 ">
                          <i [ngClass]="loaderAction? 'fa fa-spinner fa-spin isDisabled': 'fa fa-hand-paper-o'"></i> Assign Me
                        </a>
                        <a [ngClass]="{'isDisabled': loaderAction}" class="animated fadeInDown user-action-a-a" (click)="givenbyme('given', item)"
                          *ngIf="user_given_listArray.indexOf(item?.id) != -1 && userName">
                          <i [ngClass]="loaderAction? 'fa fa-spinner fa-spin isDisabled': 'fa fa-user'"></i> Mark as Given
                        </a>
                      </div>
                      <ng-template [ngIf]="item['numberPopup']">
                        <div class="user-action-ass-given">
                          <input class="" type="number" min="0" max="10" [(ngModel)]="item['raphonenumber']" placeholder="Mobile Number">
                          <a class="user-action-a-a" (click)="validateMobileNumber(item['raphonenumber'], item)">Submit</a>
                          <a class="user-action-a-a red" (click)="item['numberPopup'] = false">Cancel</a>
                        </div>
                      </ng-template>

                    </div>
                    <div class="result-g-box">
                      <p>No Data Found</p>
                    </div>
                  </ng-template>
                </ng-template>
                
                <ng-template [ngIf]="legends_details =='mylist'">
                  <ng-template [ngIf]="true">
                    <div class="result-g-box {{ i }}" [ngClass]="{'displaynone': !(user_given_listArray.indexOf(item?.id) != -1 && userName)}"
                      *ngFor="let item of mapData; let i = index">
                      <div style="cursor: pointer;" class="lat-details-g animated fadeInDown"
                        (click)="item[collapse] = !item[collapse]">
                        <h5 (click)="zoomToPlace(item, i)"><img class="title_icons" [src]="item.icon"
                            alt="">{{item.name}}
                        </h5>
                        <p>{{item.address}}</p>
                      </div>
                      <div class="lat-details-g moredetails" style="overflow: hidden">
                        <div class="animated fadeIn" *ngIf="item[collapse]">
                          <p *ngIf="item?.cityName"><b>City :</b> {{item?.cityName}}</p>
                          <p *ngIf="item?.wardName"><b>Ward :</b> {{item?.wardName}}</p>
                          <p *ngIf="item?.category"><b>Category :</b> {{item?.category}}</p>
                          <p *ngIf="item?.subcategory"><b>Subcategory :</b> {{item?.subcategory}}</p>
                          <p *ngIf="item?.lat"><b>Latitude :</b> {{item?.lat}}</p>
                          <p *ngIf="item?.lng"><b>Longitude :</b> {{item?.lng}}</p>
                          <p *ngIf="item?.lng"><b>Id :</b> {{item?.id}}</p>
                        </div>
                      </div>
                      <div class="user-action" *ngIf="!item['numberPopup']">
                        <a [ngClass]="{'isDisabled': loaderAction}" class="animated fadeInDown user-action-a-a" (click)="givenbyme('given', item)"
                          *ngIf="user_given_listArray.indexOf(item?.id) != -1 && userName">
                          <i [ngClass]="loaderAction? 'fa fa-spinner fa-spin isDisabled': 'fa fa-user'"></i> Mark as Given
                        </a>
                      </div>
                    </div>
                    <div class="result-g-box">
                      <p>No Data Found</p>
                    </div>
                  </ng-template>
                </ng-template>
              </div>
            </div>
          </div>
        </div>
        <!-- End ra-custom-categories  -->
        <div class="plus-menu-ra" style="left: 59px;bottom: 50px;">
          <span class="fa fa-plus-circle" (click)="leftaddmenu = !leftaddmenu"></span>
          <div class="menub-box">
            <ul [ngClass]="{'active': leftaddmenu}">
              <li>
                <a style="color: #38a669" target="_blank" href="https://ee.kobotoolbox.org/x/#SPEoN8QZ">
                  Join Local Support Network <i class="fa fa-angle-right"></i>
                </a>
              </li>
              <li>
                <a style="color: #38a669" (click)="NeighbourhoodData()">Social distancing <i
                    class="fa fa-angle-right"></i></a>
              </li>
              <li>
                <a style="color: #38a669" (click)="NeighbourhoodAnalytics()">Refer a Needy <i
                    class="fa fa-angle-right"></i>
                </a>
              </li>
              <li>
                <a style="color: #38a669" (click)="toVolunteer()">Volunteer <i class="fa fa-angle-right"></i> </a>
              </li>
            </ul>
          </div>
        </div>
        <app-main-content #mapref [mapData]="mapData" [geoJson]="geoJson" [AQM]="AQM" [AQMGraphLoc]="AQMGraphLoc" [graphData]="graphData"
          [graphDataStatus]="graphDataStatus" [showComp]="showComp" [compare]="compare" [showgraphs]="showgraphs"
          [selIssCat]="selIssCat" (WardData)="WardData($event)" (hideGraphs)="hideGraphs($event)"
          [WardDetails]="WardDetails" [showGovernance]="showGovernance" [wardAgencyList]="wardAgencyList"
          [showAgencies]="showAgencies" [IssueData]="IssueData" [showIssues]="showIssues"></app-main-content>
      </div>

      <div [ngStyle]="{'display': (defaultpage == 'Zones')? 'block': 'none'}" class="web-map-wrapper"
        style="position: relative;top: 70px;">
        <app-zone-creator></app-zone-creator>
      </div>

      <!-- <div *ngIf="dataService.zoom > 15"
        style="padding-top: 5px;margin: 0;height: 75px;position: absolute;bottom: 30px;background-color: white;width: calc(100% - 335px);overflow: auto;white-space: nowrap;">
        <div style="width: 100%;padding-left: 10px;text-decoration: underline;">
          <strong>Map Shortcuts</strong>
        </div>
        <div style="padding: 0 1rem;display: inline;" *ngFor="let markerList of mapData;let ML = index;">
          <img [src]="markerList.icon" style="height: 40px;" (click)="markerListClick(markerList)">
        </div>
      </div> -->
    </div>
  </div>
  <div *ngIf="false">
    <span (click)="getlocation()" class="myLoc" id="myLocation" *ngIf="!ShowForum && !ShowAnalytics">
      <i class="fa fa-crosshairs" aria-hidden="true" style="color: black;font-size: 24px;"></i>
    </span>
    <span style="position: absolute;top: calc(100vh - 328px);left: 58.4%;" id="centerLocation"
      *ngIf="!ShowForum && !ShowAnalytics">
      <i class="fa fa-crosshairs" aria-hidden="true" style="color: black;font-size: 24px;"></i>
    </span>
  </div>
  <button [hidden]="true" id="dataWarning" (click)="open(cityData,'cityData')"></button>

  <!-- About_Us -->
  <ng-template #content let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="modal-basic-title">About US</h5>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
        <i class="fa fa-times" aria-hidden="true" style="font-size: 18px;color: red"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="about-us">
        <p>The Neighbourhood Dashboard aggregates civic-environmental data along with governance data at a neighbourhood
          level
          for cities around India. We are displaying it on a map and presenting it to you as a set of charts.</p>
        <p>Our objective is to become the platform for</p>
        <p>- understanding what is happening in your neighourhood</p>
        <p>- holding the local governance accountable.</p>
        <p>Please Note - this data is being shown AS IS. We are not responsible for errors which might come in. However,
          please
          do inform us of errors, and if possible, we will make amends on our data.</p>
        <h4>Some Users and Use Cases</h4>
        <ul>
          <li><strong>1. Solve Ninja/Youth/Citizens - </strong>
            <ul>
              <li>Discover the existing Governance Infrastructure in your neighbourhood</li>
              <li>see visualised issues and Government Redressal mechanisms in your neighbourhood</li>
            </ul>
          </li>
          <li><strong>2. RWA/Corporator/MLA - </strong>
            <ul>
              <li>Do what the Solve Ninja/Youth/Citizen can do and</li>
              <li>Use this as a tool to make teams/agencies accountable</li>
            </ul>
          </li>
          <li><strong>3. Media and Academics - </strong>
            <ul>
              <li>Do all of the above and be able to infer how the quickly the neighbourhood responds to issues and how
                capable
                it is to resolve them quickly.</li>
            </ul>
          </li>
        </ul>
        <h4>We have data on the following levels</h4>
        <ul>
          <li><strong>Governance</strong>
            <ol>
              <li>Ward / Corporator</li>
              <li>Constituency / MLA</li>
            </ol>
          </li>
          <li><strong>Government Redressal</strong>
            <ol>
              <li>Police Stations</li>
              <li>Bus Stops</li>
              <li>Parks and Playgrounds</li>
              <li>Other Government Offices</li>
            </ol>
          </li>
          <li><strong>Issues</strong>
            <ol>
              <li>Waste - Garbage dump sites / DWCC Locations / Waste Convertor Locations / Composting Locations</li>
              <li>Water - Groundwater Quality / Lake Water Quality</li>
              <li>Pothole - Pothole Locations</li>
              <li>Air - Air Quality</li>
              <li>Sanitation - Toilet locations</li>
              <li>Education - School infrastructure data</li>
              <li>Civic - BBMP Offices</li>
              <li>Governance - Street Quality</li>
            </ol>
          </li>
        </ul>
        <h4>Data Providers</h4>
        <h4>We thank the following data providers for supplying the information used here:</h4>
        <ul>
          <li>Opencity.in</li>
          <li>FFEM</li>
          <li>Testing Waters</li>
          <li>Janaagraha</li>
          <li>National University for Educational Planning and Administration</li>
          <li>Data.gov.in</li>
          <li>Central Pollution Control Board</li>
          <li>Those Icons and FreePik on Flaticon.com</li>
        </ul>
        <h4>We thank for their support</h4>
        <ul>
          <li>Suresh Nair</li>
          <li>Sooraj Subramanian</li>
          <li>Anirudha Mysore</li>
          <li>Team Azureiken</li>
        </ul>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss()">Close</button>
    </div>
  </ng-template>

  <ng-template #FAQ let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="modal-basic-title">FAQ</h5>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
        <i class="fa fa-times" aria-hidden="true" style="font-size: 18px;color: red"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="about-us">
        <div>
          <div class="faq">
            <p><strong>Why Neighbourhood dashboard?</strong></p>
            <p>To make data available to citizens to aid them in their interactions with the local government. We also
              expect
              that by providing a platform to display civic and environmental problems, we will also be able to solve
              them
            </p>
            <p><strong>Who are you guys?</strong></p>
            <p>We are Reap Benefit. We have created a network of about 24,000 Solve Ninjas - school students in the age
              group
              of 12-18 - who solve civic and environmental issues through a process we call DISS (Discover, Investigate,
              Solve,
              Share)
            </p>
            <p> </p>
            <p><strong>How do i become a Solve Ninja?</strong></p>
            <p>It’s quite simple. Go to the dashboard, you’ll have a set of problems in your neighbourhood that you can
              solve.
              Then you go out and solve the problem.</p>
            <p>If you need help do contact us - Download our app “Solve Ninja” to connect with us easily.</p>
            <p><strong>You guys are cool! I’d like to intern with you guys! Who do i talk to?</strong></p>
            <p>We’re always looking for interns and volunteers! Mail us at
              <u>careers@reapbenefit.org</u> for more details</p>
            <p><strong>I’d like to get to know you guys better! How do I do it?</strong></p>
            <p>We get this all the time! Relax! We’re used to it - just mail us at
              <u>info@reapbenefit.org</u>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss()">Close</button>
    </div>
  </ng-template>
  <ng-template #cityData let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="modal-basic-title">Warning</h5>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
        <i class="fa fa-times" aria-hidden="true" style="font-size: 18px;color: red"></i>
      </button>
    </div>
    <div class="modal-body">
      <span>Currently, only Bengaluru is supported. Email "info@reapbenefit.org" if you are willing to help add your
        city
        here.</span>
    </div>
  </ng-template>

</div>

<div id="page" *ngIf="isMobile">

  <div class="loader" *ngIf="!MenuItems">
    <span class="fa fa-spinner fa-spin"></span>
  </div>


  <div class="routing-section-localdata" style="position: relative;height: calc(100% - 52px);">
    <!-- Page header -->
    <div class="header header-fixed">
      <div class="logo"></div>
      <div class="ra-title">
        <h5>Covid Neighbourhood</h5>
        <h5>Dashboard</h5>
      </div>
      <div class="left-menu" id="current">
        <p>Current Location</p>
        <h5 class="cur-lo">{{CitySelected?.cityName || 'Your Location'}}</h5>
      </div>
    </div>
    <div class="filter-menu-bar" id="location">
      <div class="filter-btn cat" (click)="filterSearch = !filterSearch;">
        <span class="fa fa-filter"></span> Local Data
      </div>
      <div class="filter-btn loc" (click)="searchLocation = !searchLocation; openpopups = false">
        <span class="fa fa-map-marker"></span> Cities
      </div>
    </div>
    <div class="search-menu" [ngStyle]="{'display': searchLocation? 'block': 'none'}"
      style="top: 58px;z-index: 96 !important;">
      <div class="search-menu-box animated fadeInDown">
        <div class="location-dropdown">
          <a href="JavaScript:void(0)" class="close-menu" (click)="searchLocation = false"><i
              class="fa fa-times-circle"></i></a>
          <!-- <a>My Current Location</a> -->
        </div>
        <div class="city-location" *ngIf="ShowCitySelect">
          <label style="margin-bottom: 0px;font-size: 14px;">Select City</label>
          <ngx-select-dropdown (change)="SelectCity($event)" [multiple]="false" [(ngModel)]="CitySelected"
            [config]="configCity" [options]="cities"></ngx-select-dropdown>
        </div>
        <span style="text-align: center;font-weight: 200;font-size: 14px;margin: 0px 0;position: relative;top: -3px;"> (
          OR ) </span>
        <div class="map-wrapper">
          <label style="margin-bottom: 0px;font-size: 14px;">Select Location</label>
          <div class="map-location">
            <input placeholder="Select location" autocorrect="off" autocapitalize="off" spellcheck="off" type="text"
              class="form-control searchInput" #search [formControl]="searchControl" (input)="searchText($event)">
            <i class="fa fa-search" id="SeachIcon"></i>
          </div>
        </div>
        <div class="city-location" *ngIf="ShowWardSelect && false">
          <label style="margin-bottom: 0px;font-size: 14px;">Ward</label>
          <ngx-select-dropdown (change)="WardSelectedEvent($event)" [multiple]="false" [(ngModel)]="WardSelected"
            [config]="configWard" [options]="Wards"></ngx-select-dropdown>
        </div>
      </div>
    </div>
    <div class="search-menu" *ngIf="filterSearch " style="top: 56px;z-index: 96 !important;">
      <div class="search-menu-box animated fadeInDown">
        <div class="clear-close">
          <span class="clo" (click)="filterSearch = false"><i class="fa fa-times-circle fa-2x"></i></span>
        </div>
        <div class="tree-wrapper">
          <!-- ra-custom-categories Mobile -->
          <div class="ra-custom-categories-mobile">
            <div class="category" style="display: none !important;">
              <!-- Do not remove this based on this down tree func working -->
              <div class="" *ngFor="let menuItem of MenuItems;let menuIndex = index;">
                <ngx-treeview [config]="configMenu" [items]="menuItem"
                  (selectedChange)="TreeMenuItemsSelect($event,menuItem)">
                </ngx-treeview>
              </div>
            </div>
            <ul *ngFor="let menuItem of MenuItems;let menuIndex = index;" class="box">
              <li class="first-child-section-mobile">
                <div class="header-sec-mobile"
                  (click)="this['mobiletreelvel'+menuIndex] = !this['mobiletreelvel'+menuIndex]">
                  {{menuItem[0].text}}
                  <span class="count" *ngIf="getcounterCount(menuItem) != 0">{{getcounterCount(menuItem)}}</span>
                  <i class="collapsicons fa fa-chevron-down"
                    [ngClass]="{'uparrow': !this['mobiletreelvel'+menuIndex] }"></i>
                </div>
                <div class="body-sec-mobile" [ngClass]="{'active': !this['mobiletreelvel'+menuIndex]}">
                  <div *ngIf="menuItem[0]?.internalChildren && menuItem[0]?.internalChildren.length" class="child-box">
                    <span class="selection-cnt-mobile">
                      <span class="" (click)="selectAll(menuItem)">Select</span> /
                      <span class="" (click)="deselectAll(menuItem)">Deselect all</span>
                    </span>
                    <ul>
                      <li class="child-list-mobile" *ngFor="let child of menuItem[0].internalChildren"
                        (click)="singleselect(child, menuItem)" [ngClass]="{'checked': child.internalChecked}">
                        <span>{{child.text}} </span>
                      </li>
                    </ul>
                  </div>

                </div>
              </li>
            </ul>
          </div>
          <!-- End ra-custom-categories Mobile -->
        </div>
      </div>
    </div>
    <!-- Page header -->

    <!-- Page Main -->
    <div class="page-content">
      <div class="map-section mobile-view">
        <div class="icons-details-g">
          <div class="collapse-button" style="top: 45% !important;" [ngClass]="{'rotateleft': detail_legends_collapse}"
            (click)="detail_legends_collapse = !detail_legends_collapse"><span class="fa fa-chevron-up"></span>
          </div>
          <div class="result-g" [ngClass]="{'collapseme': detail_legends_collapse}">

            <div class="static-point-section">
              <h5>In your view {{detail_list_number}}</h5>
              <ul style="padding-left: 9px;">
                <ng-template [ngIf]="userName && activeRole.indexOf('NGOTeam') !=-1">
                  <li class="yourview-order-0">
                    Relief requested {{ MenuItems | ratotalcounts: 'NGOTeam'}}
                  </li>
                </ng-template>

                <ng-template [ngIf]="userName && activeRole.indexOf('NGOAdmin') !=-1">
                  <li class="yourview-order-0">
                    Relief requested {{ MenuItems | ratotalcounts: 'NGOAdmin' }}
                  </li>
                </ng-template>

                <ng-template [ngIf]="!(activeRole.indexOf('NGOTeam') !=-1 ||  activeRole.indexOf('NGOAdmin') !=-1 )">

                  <ng-template ngFor let-menuItems [ngForOf]="MenuItems" let-i="index">
                    <li class="yourview-order-0" *ngIf="menuItems[0].value == 101">Families needing help
                      {{(menuItems[0]?.overall_rec_count_total != 0 && menuItems[0]?.overall_rec_count_total !=  undefined)? '('+menuItems[0]?.overall_rec_count_total+')': ' (not mapped)'}}
                    </li>
                    <li class="yourview-order-1" *ngIf="menuItems[0].value == 120">Successfully Supported
                      {{(menuItems[0]?.overall_rec_count_total != 0 && menuItems[0]?.overall_rec_count_total !=  undefined)? '('+menuItems[0]?.overall_rec_count_total+')': ' (not mapped)'}}
                    </li>
                    <li class="yourview-order-2" *ngIf="menuItems[0].value == 97">Resources Close By
                      {{(menuItems[0]?.overallcount_total != 0 && menuItems[0]?.overallcount_total != undefined )? '('+menuItems[0]?.overallcount_total+')': ' (not mapped)'}}
                    </li>
                    <li class="yourview-order-3" *ngIf="menuItems[0].value == 121">Volunteers Close By
                      {{(menuItems[0]?.overallcount_total != 0 && menuItems[0]?.overallcount_total != undefined )? '('+menuItems[0]?.overallcount_total+')': ' (not mapped)'}}
                    </li>
                  </ng-template>
                </ng-template>
              </ul>
            </div>


            <div class="actiob-mode-dl">
              <a [ngClass]="{'active': legends_details == 'legends'}" href="JavaScript:void(0)"
                (click)="legends_details = 'legends'">Legends</a>
              <a [ngClass]="{'active': legends_details == 'details'}" href="JavaScript:void(0)"
                (click)="legends_details = 'details'; detail_list_number = 100">Details</a>
              
              <a *ngIf="userName" [ngClass]="{'active': legends_details == 'mylist'}" href="JavaScript:void(0)"
                  (click)="legends_details = 'mylist'; detail_list_number = 100">My Lists</a>
            </div>
            <div class="filter-g" *ngIf="legends_details == 'details' && mapData?.length">
              <input type="text" placeholder="Search place" [(ngModel)]="filterdetailsvalue">
            </div>
            
            <h5 *ngIf="legends_details == 'mylist' && userName" class="ass-closed-count">Assignments closed <span>
                ({{total_cosed_Asss}})</span></h5>
            <h5 *ngIf="legends_details == 'mylist' && userName" class="ass-closed-count">Pending Assignments <span> </span></h5>

            <div class="result-g-d"
              (scroll)="detail_list_number = (mapData?.length >= detail_list_number)? (detail_list_number + 100): (detail_list_number)">
              <ng-template [ngIf]="legends_details == 'legends'">
                <div class="categories-box-g" style="padding-top: 10px;">
                  <ul class="webview-ra">
                    <ng-template ngFor let-menuItems [ngForOf]="MenuItems">
                      <ng-template ngFor let-items [ngForOf]="menuItems[0]['internalChildren']">
                        <li class="box" *ngIf="items.internalChecked && items.count !=0 && items.count != undefined">
                          <h5><img [src]="items.icon"
                              onerror="this.onerror=null; this.src='./assets/Icons/reapbenefit.jpg'"
                              title="{{items.subcategory}}">{{items.text}}</h5>
                          <div class="jest-count">
                            {{(items.count !=0 && items.count != undefined)? '('+items.count+')': ''}}</div>
                        </li>
                      </ng-template>
                    </ng-template>
                    <li>
                      No Categories Selected
                    </li>
                  </ul>
                </div>
              </ng-template>

              <ng-template [ngIf]="legends_details == 'details'">
                <ng-template [ngIf]="true">
                  <div class="result-g-box {{i}}"
                    *ngFor="let item of mapData | inputsearch:filterdetailsvalue; let i = index">
                    <div style="cursor: pointer;" class="lat-details-g animated fadeInDown"
                      (click)="item[collapse] = !item[collapse]">
                      <h5 (click)="zoomToPlace(item, i)"><img class="title_icons" [src]="item.icon" alt="">{{item.name}}
                      </h5>
                      <p>{{item.address}}</p>
                    </div>
                    <div class="lat-details-g moredetails" style="overflow: hidden">
                      <div class="animated fadeIn" *ngIf="item[collapse]">
                        <p *ngIf="item?.cityName"><b>City :</b> {{item?.cityName}}</p>
                        <p *ngIf="item?.wardName"><b>Ward :</b> {{item?.wardName}}</p>
                        <p *ngIf="item?.category"><b>Category :</b> {{item?.category}}</p>
                        <p *ngIf="item?.subcategory"><b>Subcategory :</b> {{item?.subcategory}}</p>
                        <p *ngIf="item?.lat"><b>Latitude :</b> {{item?.lat}}</p>
                        <p *ngIf="item?.lng"><b>Longitude :</b> {{item?.lng}}</p>
                      </div>
                    </div>

                    <div class="closedby_user" *ngIf="item?.closed_by">
                      <div><span class="bold">Closed By: </span>{{item?.closed_by}}</div>
                      <div><span>{{item?.closed_at | date:'dd-MM-y h:mm'}}</span></div>
                    </div>

                    <div class="user-action" *ngIf="!item['numberPopup']">
                      <a [ngClass]="{'isDisabled': loaderAction}" class="animated fadeInDown user-action-a-a"
                        (click)="assignme('assign', item)"
                        *ngIf="food_ration_asked.indexOf(item.menuId) != -1 && userName && allAssignedList.indexOf(item?.id) == -1 ">
                        <i [ngClass]="loaderAction? 'fa fa-spinner fa-spin isDisabled': 'fa fa-hand-paper-o'"></i> Assign Me
                      </a>
                      <a [ngClass]="{'isDisabled': loaderAction}" class="animated fadeInDown user-action-a-a"
                        (click)="givenbyme('given', item)" *ngIf="user_given_listArray.indexOf(item?.id) != -1 && userName">
                        <i [ngClass]="loaderAction? 'fa fa-spinner fa-spin isDisabled': 'fa fa-user'"></i> Mark as Given
                      </a>
                    </div>
                    <ng-template [ngIf]="item['numberPopup']">
                      <div class="user-action-ass-given">
                        <input class="" type="number" min="0" max="10" [(ngModel)]="item['raphonenumber']" placeholder="Mobile Number">
                        <a class="user-action-a-a" (click)="validateMobileNumber(item['raphonenumber'], item)">Submit</a>
                        <a class="user-action-a-a red" (click)="item['numberPopup'] = false">Cancel</a>
                      </div>
                    </ng-template>

                  </div>
                  <div class="result-g-box">
                    <p>No Data Found</p>
                  </div>
                </ng-template>
              </ng-template>

              <ng-template [ngIf]="legends_details =='mylist'">
                <ng-template [ngIf]="true">
                  <div class="result-g-box {{ i }}"
                    [ngClass]="{'displaynone': !(user_given_listArray.indexOf(item?.id) != -1 && userName)}"
                    *ngFor="let item of mapData; let i = index">
                    <div style="cursor: pointer;" class="lat-details-g animated fadeInDown"
                      (click)="item[collapse] = !item[collapse]">
                      <h5 (click)="zoomToPlace(item, i)"><img class="title_icons" [src]="item.icon" alt="">{{item.name}}
                      </h5>
                      <p>{{item.address}}</p>
                    </div>
                    <div class="lat-details-g moredetails" style="overflow: hidden">
                      <div class="animated fadeIn" *ngIf="item[collapse]">
                        <p *ngIf="item?.cityName"><b>City :</b> {{item?.cityName}}</p>
                        <p *ngIf="item?.wardName"><b>Ward :</b> {{item?.wardName}}</p>
                        <p *ngIf="item?.category"><b>Category :</b> {{item?.category}}</p>
                        <p *ngIf="item?.subcategory"><b>Subcategory :</b> {{item?.subcategory}}</p>
                        <p *ngIf="item?.lat"><b>Latitude :</b> {{item?.lat}}</p>
                        <p *ngIf="item?.lng"><b>Longitude :</b> {{item?.lng}}</p>
                        <p *ngIf="item?.lng"><b>Id :</b> {{item?.id}}</p>
                      </div>
                    </div>
                    <div class="user-action" *ngIf="!item['numberPopup']">
                      <a [ngClass]="{'isDisabled': loaderAction}" class="animated fadeInDown user-action-a-a"
                        (click)="givenbyme('given', item)" *ngIf="user_given_listArray.indexOf(item?.id) != -1 && userName">
                        <i [ngClass]="loaderAction? 'fa fa-spinner fa-spin isDisabled': 'fa fa-user'"></i> Mark as Given
                      </a>
                    </div>
                  </div>
                  <div class="result-g-box">
                    <p>No Data Found</p>
                  </div>
                </ng-template>
              </ng-template>
            </div>
          </div>
        </div>

        <div class="plus-menu-ra">
          <span class="fa fa-plus-circle" (click)="leftaddmenu = !leftaddmenu"></span>
          <div class="menub-box">
            <ul [ngClass]="{'active': leftaddmenu}">
              <li><a style="color: #38a669" href="https://ee.kobotoolbox.org/x/#SPEoN8QZ" target="_blank">
                  Join Local Support Network
                  <i class="fa fa-angle-right"></i> </a>
              </li>
              <li>
                <a style="color: #38a669" (click)="NeighbourhoodData()">Social distancing <i
                    class="fa fa-angle-right"></i></a>
              </li>
              <li>
                <a style="color: #38a669" (click)="NeighbourhoodAnalytics()">Refer a Needy <i
                    class="fa fa-angle-right"></i>
                </a>
              </li>
              <li>
                <a style="color: #38a669" (click)="toVolunteer()">Volunteer <i class="fa fa-angle-right"></i> </a>
              </li>
            </ul>
          </div>
        </div>
        <app-main-content #mapref [mapData]="mapData" [AQM]="AQM" [AQMGraphLoc]="AQMGraphLoc" [graphData]="graphData"
          [graphDataStatus]="graphDataStatus" [showComp]="showComp" [compare]="compare" [showgraphs]="showgraphs"
          [selIssCat]="selIssCat" (WardData)="WardData($event)" (hideGraphs)="hideGraphs($event)"
          [WardDetails]="WardDetails" [showGovernance]="showGovernance" [wardAgencyList]="wardAgencyList"
          [showAgencies]="showAgencies" [IssueData]="IssueData" [showIssues]="showIssues"></app-main-content>
      </div>
    </div>
    <!-- Page Main -->
  </div>

  <div class="routing-section-home"
    style="height: 100%;display: block;max-height: 94%;overflow: auto;position: fixed;top: 0;left: 0;right: 0;bottom: 0;background: #ffff;z-index: 97 !important;"
    [ngStyle]="{'display': (defaultpage == 'Home')? 'block': 'none'}">

    <div class="header header-fixed" style="z-index: 9 !important;">
      <div class="logo">
      </div>
    </div>

    <div class="home-page-title" style="padding-top: 60px;">
      <h5 class="home-page-header-title text-center"
        style="color: #38a669;font-size: 18px !important;margin-bottom: 12px;">
        Covid Neighbourhood Dashboard
      </h5>
      <ul class="bullet-points">
        <li class="text-center" style="font-weight: 300;margin-bottom: 20px;color: #38a669;">Join Hands With Us</li>
        <!-- <li>Supported successfully</li> -->
        <!-- <li>Medical facilities mapped</li>
        <li>People needing help, you represent facilities tool mapped</li>
        <li>Resource like canteens, PDS-Rations, Shops mapped</li>
        <li>Shops near you mapped</li>
        <li>Volunteers near you Mapped</li> -->
      </ul>
      <ul class="web-big-button-icon-list">
        <li>
          <div (click)="NeighbourhoodData()">
            <i class="fa fa-home"></i>
            <span>Social distancing </span>
          </div>
        </li>
        <li>
          <div (click)="NeighbourhoodAnalytics()">
            <i class="fa fa-handshake-o"></i>
            <span>Refer a Needy</span>
          </div>
        </li>
        <li>
          <div (click)="toVolunteer()">
            <i class="fa fa-hand-paper-o"></i>
            <span>Volunteer </span>
          </div>
        </li>
      </ul>
      <div class="action-button">
        <!-- <a href="JavaScript:void(0)" (click)="homepageButton1()">Want Medical Help?</a> -->
        <a href="JavaScript:void(0)" (click)="homepageButton2()">Help those in need</a>
        <a href="JavaScript:void(0)" (click)="homepageButton3()">Want to know where you can get help?</a>
      </div>
    </div>

    <h6 class="sub-title-home animated fadeIn" *ngIf="CountsListArray?.length"
      style="margin: 12px 12px;text-align: center;font-size: 21px;">Data Found Near You</h6>
    <!-- <p class="animated fadeIn" *ngIf="CountsListArray?.length" style="font-size: 14px;color: #333;margin: 0 15px;margin-bottom: 15px;">While the total data
      includes information from 20+ cities, 40 schemes, 100,000+ people supported with partner NGOs, 150,000 people needing
      support, 50,000+ data points crowdsourced, the following data points exist 30 Km around you</p> -->
    <!-- Sub Categories count  Based on Selection-->
    <div class="hom-page-body animated fadeIn">
      <div class="box">
        <div class="title-b">Cities</div>
        <span class="count">100</span>
      </div>
      <div class="box">
        <div class="title-b">Schemes</div>
        <span class="count">40</span>
      </div>
      <ng-template ngFor let-menuItems [ngForOf]="MenuItems">
        <div class="box animate" [ngClass]="{'animatebox': getoverrallrectangleCountData.length == 0}"
          *ngIf="menuItems[0].value == 120">
          <div class="title-b">People supported with Partners</div>
          <span
            class="count">{{menuItems[0].overall_rec_count_total? (menuItems[0].overall_rec_count_total * 4): '0'}}</span>
        </div>
        <div class="box animate" [ngClass]="{'animatebox': getoverrallrectangleCountData.length == 0}"
          *ngIf="menuItems[0].value == 101" style="order: 1">
          <div class="title-b">People needing support</div>
          <span
            class="count">{{menuItems[0].overall_rec_count_total? (menuItems[0].overall_rec_count_total * 4): '0'}}</span>
        </div>
      </ng-template>
    </div>
    <!-- End Sub Categories count  Based on Selection-->

  </div>

  <!-- Page Footer -->
  <div id="footer-menu" [ngStyle]="{'bottom': openpopups? '-100px': '0'}">
    <a href="JavaScript:void(0)" [ngClass]="{'active': defaultpage == 'Home'}"
      (click)="defaultpage = 'Home'; searchLocation = true">
      <span class="icon fa fa-home"></span>
      <span class="title-f">Home</span>
      <strong></strong></a>
    <!-- <a (click)="openpopups = !openpopups" href="JavaScript:void(0)">
      <span class="coranaimg">
      </span>
      <span class="title-f">Participate</span>
      <strong></strong></a> -->
    <a href="JavaScript:void(0)" [ngClass]="{'active': defaultpage == 'LocalData'}" (click)="pageLocaLData()">
      <span class="icon fa fa-map-marker"></span>
      <span class="title-f">Show Map</span>
      <strong></strong></a>
    <a href="JavaScript:void(0)" (click)="filterSearch = !filterSearch; defaultpage = 'LocalData';">
      <span class="icon fa fa-filter"></span>
      <span class="title-f">Local Data</span>
      <strong></strong></a>

    <a *ngIf="!(activeRole.indexOf('NGOUser') !=-1 || activeRole.indexOf('NGOTeam') !=-1 || activeRole.indexOf('NGOAdmin') !=-1)"
      target="_blank" href="https://discourse.solveninja.org/tag/local-schemes">
      <span class="icon fa fa-comments"></span>
      <span class="title-f">Local Schemes</span>
      <strong></strong></a>

    <a *ngIf="(activeRole.indexOf('NGOAdmin') !=-1)" target="_blank"
      href="http://internaldashboard.solveninja.org:4000/public/dashboard/65ea5995-d9cb-4fd7-82c1-07d095291aba">
      <span class="icon fa fa-bar-chart"></span>
      <span class="title-f">Analytics</span>
      <strong></strong></a>

    <a (click)="menupopup = !menupopup" href="JavaScript:void(0)">
      <span class="icon fa fa-bars"></span>
      <span class="title-f">Contribute</span>
      <strong></strong></a>

    <!-- <a *ngIf="(activeRole.indexOf('NGOUser') !=-1 || activeRole.indexOf('NGOTeam') !=-1)" href="JavaScript:void(0)"
      (click)="addmenu = true">
      <span class="icon fa fa-plus-circle"></span>
      <span class="title-f">Add</span>
      <strong></strong></a> -->


    <div class="clear"></div>
  </div>
  <!-- Page Footer -->

  <!-- Participate Menu -->
  <div class="ra-custom-popup" *ngIf="openpopups">
    <div class="animated bounceInUp menu-popups  menu-active">
      <div class="menu-title">
        <h1 class="popup-title">Fight Corona Virus</h1>
        <p class="color-highlight">
          Join hands with Reap Benefit
        </p>
        <a href="#" class="close-menu" (click)="openpopups = false"><i class="fa fa-times-circle"></i></a>
      </div>
      <div class="content">
        <ul class="link-list">
          <li><a style="color: #38a669" (click)="NeighbourhoodForum()">Self Assessment <i class="fa fa-angle-right"></i>
            </a></li>
          <li><a style="color: #38a669" (click)="NeighbourhoodData()">Social distancing <i
                class="fa fa-angle-right"></i> </a></li>
          <li><a style="color: #38a669" (click)="NeighbourhoodAnalytics()">Help Those In Need <i
                class="fa fa-angle-right"></i> </a></li>
          <li><a style="color: #38a669" (click)="toVolunteer()">Volunteer <i class="fa fa-angle-right"></i> </a></li>
        </ul>
        <div class="clear"></div>
      </div>
    </div>
  </div>
  <!-- End Participate Menu -->

  <!-- More Menu -->
  <div class="ra-custom-popup" *ngIf="addmenu">
    <div class="animated bounceInUp menu-popups  menu-active">
      <div class="menu-title">
        <a href="#" class="close-menu" style="top: -15px !important;right: -4px !important" (click)="addmenu = false"><i
            class="fa fa-times-circle"></i></a>
      </div>
      <div class="content">
        <ul class="link-list">
          <li *ngIf="(activeRole.indexOf('NGOUser') !=-1 || activeRole.indexOf('NGOTeam') !=-1)">
            <a style="color: #38a669" (click)="NeighbourhoodAnalytics()">Help Those In Need <i
                class="fa fa-angle-right"></i> </a>
          </li>
          <li *ngIf="(activeRole.indexOf('NGOUser') !=-1 || activeRole.indexOf('NGOTeam') !=-1)">
            <a style="color: #38a669" (click)="toVolunteer()">Volunteer <i class="fa fa-angle-right"></i> </a></li>
        </ul>
        <div class="clear"></div>
      </div>
    </div>
  </div>
  <!-- More Menu -->

  <!-- More Menu -->
  <div class="ra-custom-popup" *ngIf="menupopup">
    <div class="animated bounceInUp menu-popups  menu-active">
      <div class="menu-title">
        <h1 *ngIf="userName" class="popup-user-images"><span class="fa fa-user-circle-o"></span>
          <p class="color-highlight" style="
            margin-left: 9px;
            display: inline-block;
            position: relative;
            top: -11px;
            text-transform: capitalize;
            font-size: 16px !important;">Hi {{userName}} </p>
        </h1>
        <a href="#" class="close-menu"
          [ngStyle]="{'top': userName? '10px' : '-14px', 'right': userName? '10px' :' -6px' }"
          (click)="menupopup = false"><i class="fa fa-times-circle"></i></a>
      </div>
      <div class="content">
        <ul class="link-list">


          <li (click)="userLogin()" *ngIf="!userName">
            <a style="color: #38a669">Login <i class="fa fa-angle-right"></i></a>
          </li>

          <li><a style="color: #38a669" href="https://ee.kobotoolbox.org/x/#SPEoN8QZ" target="_blank">Join Local Support
              Network
              <i class="fa fa-angle-right"></i> </a>
          </li>

          <li
            *ngIf="(activeRole.indexOf('NGOUser') !=-1 || activeRole.indexOf('NGOTeam') !=-1 || activeRole.indexOf('NGOAdmin') !=-1)">
            <a style="color: #38a669" href="https://discourse.solveninja.org/tag/local-schemes" target="_blank">
              Local Schemes<i class="fa fa-angle-right"></i> </a>
          </li>

          <li *ngIf="!(activeRole.indexOf('NGOAdmin') !=-1)">
            <a style="color: #38a669"
              href="http://internaldashboard.solveninja.org:4000/public/dashboard/65ea5995-d9cb-4fd7-82c1-07d095291aba"
              target="_blank">
              Analytics<i class="fa fa-angle-right"></i> </a>
          </li>

          <li><a style="color: #38a669" href="https://covidselfcheck.app/" target="_blank">Self Assessment <i
                class="fa fa-angle-right"></i> </a>
          </li>

          <li>
            <a style="color: #38a669" href="JavaScript:void(0)" (click)="NeighbourhoodData()">Social distancing <i
                class="fa fa-angle-right"></i></a>
          </li>
          <li>
            <a style="color: #38a669" (click)="NeighbourhoodAnalytics()">Help Those In Need <i
                class="fa fa-angle-right"></i> </a>
          </li>
          <li>
            <a style="color: #38a669" (click)="toVolunteer()">Volunteer <i class="fa fa-angle-right"></i> </a></li>

          <li *ngIf="userName" (click)="LogoutMe()">
            <a style="color: #38a669">Logout <i class="fa fa-angle-right"></i></a>
          </li>
        </ul>
        <div class="clear"></div>
      </div>
    </div>
  </div>
  <!-- More Menu -->

</div>



<!-- <div class="mobilenumber-popup" *ngIf="numberPopup">
  <div class="nubmer-box animated fadeInDown">
    <h5>Enter Mobile Number <span class="fa fa-times" (click)="numberPopup = false" style="font-size: 18px;"></span></h5>
    
    <div class="body-mobile">
      <ul>
        <li>
          <input type="number"  min="0" max="10" [(ngModel)]="mobilenumber" placeholder="XXX XXX XXXX" pattern="[789][0-9]{9}">
        </li>
        <li>
          <a (click)="validateMobileNumber()">Submit</a>
        </li>
      </ul>
    </div>
    
  </div>
</div> -->

