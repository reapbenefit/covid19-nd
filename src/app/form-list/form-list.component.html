<div class="container" id="formlist_page" style="margin-top: 5%;position: relative;">

  <div class="row">
    <div class="col-md-12 pt-5" style="justify-content: center;">
      <h4 class="header_padding pt-3">Form List</h4>
    </div>
  </div>

  <div class="row">
    <div class="col-md-5">
      <nav class="navbar">
        <input class="form-control" type="text" name="search" [(ngModel)]="filter">
      </nav>
    </div>

    <div class="col-md-4 offset-3" style="padding-left:10rem;">
      <button id="openModalButton" (click)="open_form_types()" class="btn btn-default btn-circle btn-xl"
        type="button"><i class="fa fa-plus"></i></button>
    </div>
  </div>
  <div class="col-md-12">

    <table class="table table_customize table-striped table-hover mx-auto">
      <thead>
        <tr>
          <th>Sl No.</th>
          <th>Form Name</th>
          <th>Preview Form</th>
          <th>Form Status</th>
          <th>Action</th>

          <th>Create Another</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let formsarr of form_list | orderBy: key : reverse | filter:filter | paginate: { itemsPerPage: 8, currentPage: p }; let i = index">
          <th>{{formsarr.index}}</th>
          <td>{{formsarr.name}}</td>
          <td><button class="btn btn-success" (click)="preview_form(formsarr)">Preview</button></td>
          <td>
            <p>{{formsarr.status}}</p>
          </td>

          <td [ngSwitch]="formsarr.status">
            <button class="btn btn-success" *ngSwitchCase="'Pending'" (click)="open_status(formsarr)">Approve</button>
            <button class="btn btn-danger" *ngSwitchCase="'Approved'" (click)="open_mobile(formsarr)">Disable</button>
            <button class="btn btn-warning" *ngSwitchCase="'Disabled'" (click)="open_enable(formsarr)">Enable</button>
          </td>

          <td>
            <button class="btn btn-success" (click)="create_form(formsarr)">Create Another</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="container">
      <div class="row mt-3" style="justify-content: center;">
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
    </div>
  </div>
</div>

<ng-template class="modal_customize_tree" #content let-modal>
  <div class="modal-header" style="justify-content: center;">
    <h4 class="modal-title" id="modal-basic-title">Are you sure you want to Disable ?</h4>
    <button type="button" id="approve_close" class="close custom_close" aria-label="Close"
      (click)="modal.dismiss('Cross click')">
      <span style="font-size: 25px;" aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class=" row" style="padding-top: 1rem;justify-content: center;">
      <button class="btn btn-danger" (click)="modal.dismiss('Cross click')">Cancel</button>&nbsp;&nbsp;&nbsp;
      <button class="btn btn-success" (click)="delete_form(formsarr)">Disable</button>
    </div>
  </div>
</ng-template>



<div style="position:absolute;top:0%;right: 0;margin: auto;">
  <ng-template class="" #refer_needy let-modal>
    <div class="modal-header" style="justify-content: center;">
      <h5 class="modal-title" id="modal-basic-title">{{previewformname}}</h5>
      <button type="button" class="close custom_close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span style="font-size: 25px;" aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="container">

      <div class="row" style="justify-content: center;">
        <div class="col-md-12 mb-4">
          <formio [form]="preview_fields"></formio>
        </div>
      </div>
    </div>
  </ng-template>
</div>


<div style="position:absolute;top:0%;right: 0;margin: auto;">
  <ng-template class="" #signup_volunteer let-modal>
    <div class="modal-header" style="justify-content: center;">
      <h6 class="modal-title" id="modal-basic-title">Asset Template</h6>
      <button type="button" id="another_template" class="close custom_close" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span style="font-size: 25px;" aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-12 mb-4">
          <!-- <formio [form]="fields"></formio> -->
         <div class="col-12 pt-3">
           <input type="text" class="form-control" placeholder="Enter Form Name" [(ngModel)]="templateform_name">
         </div>
           <div class="row pt-3">
            Language
               <div class="col-md-12">
              
            <select class="custom-select" [(ngModel)]="selectedLanguage" (change)="updateLanguage($event)">
              <option selected>Select Languages</option>
              <option *ngFor="let lang of languageList; let index = index" [value]="lang.code">{{lang.name}}</option>
            </select>
                </div>
         </div>
         <div class="row pt-3">
            Organization
             <div class="col-md-12 pdt-3">
            
              <button  class="btn btn-primary btn-md custom_btn_css" (click)="getOrg()">Organization</button>

              </div>
       </div>
          <form [formGroup]="dynamicForm" (ngSubmit)="onSubmitTemplate()" novalidate>
            <div class="row" *ngFor="let controls of fields">
              <div class="col-md-8">
                {{controls.label}}
                <input [type]="controls.type" [attr.disabled]="controls.disabled ? '' : null" class="form-control"
                  [formControlName]="controls.label" />
              </div>
              <div class="col-md-2 pt-4">
                <input value="edit label" type="button" class="btn btn-primary" (click)="edit_label(controls);">
              </div>
              <div class="col-md-2 pt-4">
                <mat-slide-toggle [checked]="controls.disabled" class="toggle" [color]="olor"
                  (change)="hidden_input(controls,$event)">
                  <p class="pt-3" *ngIf="!controls.disabled">Hide</p>
                  <p class="pt-3" *ngIf="controls.disabled">Hidden</p>
                </mat-slide-toggle>
              </div>
              <br>
            </div>
            <br>
            <div class="row" style="justify-content: center;">
              <input type="submit" value="Create Another Template" class="btn btn-success" />
            </div>
          </form>
        </div>
      </div>
    </div>
  </ng-template>
</div>


<div class="custome_div">
  <ng-template class="" #inforamation_local let-modal>
    <div class="modal-header" style="justify-content: center;">
      <h6 class="modal-title" id="modal-basic-title">Update Asset Template</h6>
      <button type="button" id="label_close" class="close custom_close" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span style="font-size: 25px;" aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="container">
      <div class="row" style="justify-content: center;">
        <div class="col-md-12 mb-4">
          <input [type]="text" class="form-control" [(ngModel)]="edit_label_input" />
        </div>
        <input value="Update Label" type="button" class="btn btn-primary" (click)="update_label();">
      </div>
    </div>
  </ng-template>
</div>

<div class="custome_div">
  <ng-template class="" #add_form_type let-modal>
    <div class="modal-header" style="justify-content: center;">
      <div class="row">
        <h5 class="modal-title" id="modal-basic-title">Add Form Types</h5>
      </div>
      <button type="button" id="closeModal" class="close custom_close" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span style="font-size: 25px;" aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="container">
      <div class="row">
        <input type="text" class="form-control" [(ngModel)]="form_type_name" placeholder="Enter Form Type">
      </div>
      <div class="row pt-3 pb-3" style="justify-content: center;">
        <input value="Save" type="button" class="btn btn-primary" (click)="add_form_type_name();">
      </div>
    </div>
  </ng-template>
</div>

<ng-template class="modal_customize_tree" #Approve_modal let-modal>
  <div class="modal-header" style="justify-content: center;">
    <h4 class="modal-title" id="modal-basic-title">Are you sure you want to Approve</h4>
    <button type="button" id="approve_close" class="close custom_close" aria-label="Close"
      (click)="modal.dismiss('Cross click')">
      <span style="font-size: 25px;" aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class=" row" style="padding-top: 1rem;justify-content: center;">
      <button class="btn btn-danger" (click)="modal.dismiss('Cross click')">Cancel</button>&nbsp;&nbsp;&nbsp;
      <button class="btn btn-success" (click)="approve_form(formsarr)">Approve</button>
    </div>
  </div>
</ng-template>


<!-- disable form -->
<ng-template class="modal_customize_tree" #Disable_form let-modal>
  <div class="modal-header" style="justify-content: center;">
    <h4 class="modal-title" id="modal-basic-title">Are you sure you want to Enable</h4>
    <button type="button" id="approve_close" class="close custom_close" aria-label="Close"
      (click)="modal.dismiss('Cross click')">
      <span style="font-size: 25px;" aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class=" row" style="padding-top: 1rem;justify-content: center;">
      <button class="btn btn-danger" (click)="modal.dismiss('Cross click')">Cancel</button>&nbsp;&nbsp;&nbsp;
      <button class="btn btn-success" (click)="enable_form(formsarr)">Enable</button>
    </div>
  </div>
</ng-template>


<ng-template class="modal_customize_tree" #deleteinput let-modal>
  <div class="modal-header" style="justify-content: center;">
    <h4 class="modal-title" id="modal-basic-title">Are you sure you want to delete ?</h4>
    <button type="button" class="close custom_close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span style="font-size: 25px;" aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class=" row" style="padding-top: 1rem;justify-content: center;">
      <button class="btn btn-danger" (click)="modal.dismiss('Cross click')">Cancel</button>&nbsp;&nbsp;&nbsp;
      <button class="btn btn-success" (click)="delete_inputobject()">Delete</button>
    </div>
  </div>
</ng-template>
<div style="position:absolute;top:0%;right: 0;margin: auto;">
  <ng-template class="" #Orglist let-modal>
    <div class="modal-header" style="justify-content: center;">
      <h6 class="modal-title" id="modal-basic-title">Org List</h6>
      <button type="button" id="member_close" class="close custom_close" aria-label="Close"
        (click)="modal.close('Cross click')">
        <span style="font-size: 25px;" aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="col-md-12 mt-3">
            <input class="form-control" type="text" name="search" [(ngModel)]="filter1">
          </div>
          <table class="table table_customize table-striped table-hover mx-auto mt-3">
            <thead>
              <tr>
                <th style="text-align: center;">Sl No.</th>
                <th>Org Name</th>
              </tr>
            </thead>
            <tbody>
              <!-- <tr *ngFor="let row of orgUserdata;let i = index" (click)="setClickedRow(i)"  [class.active]="i == selectedRow"> -->
              <tr
                *ngFor="let row of organisations | orderBy: key : reverse | filter:filter1 | paginate: { itemsPerPage: 8, currentPage: p }; let i = index"
                [class.active]="i == selectedRow">
                <td> <input type="checkbox" class="form-control" [(ngModel)]="row.selected"
                    ></td>
                <td>{{row.name}}</td>
              </tr>
            </tbody>
          </table>
          <div class="row" style="justify-content: center;">
            <button class="btn btn-success" (click)="add_members()">Add Organisations</button>
          </div>

          <div class="row mt-3" style="overflow-y:hidden !important;justify-content: center;">
            <pagination-controls (pageChange)="p = $event"></pagination-controls>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</div>