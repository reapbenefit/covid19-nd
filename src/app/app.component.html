<div class="" *ngIf="
    _router.url !== '/formbuilder' &&
    _router.url !== '/formlist' &&
    _router.url !== '/formtypelist' &&
    _router.url !== '/filterpage' &&
    _router.url !== '/registration' &&
    _router.url !== '/addfunction' &&
    _router.url !== '/map' &&
    !_router.url.includes('/addforms') &&
    !userForms &&
    _router.url !== '/sniscore'
  ">
  <landing-page></landing-page>
</div>

<div
  class="user"
  *ngIf="
    _router.url == '/map'
  "
>
  <div class="row">
    <div class="col-md-12" style="position: relative">
      <div class="form-group location-group" *ngIf="mob_view">
        Location: {{ disticName }}
      </div>
      <div class="location-msg" *ngIf="show">
        {{ popupmessage1 }}<br />
        {{ popupmessage2 }} <br />
        <span class="location-link" (click)="dostuf()">Click Here</span>
      </div>
      <div class="userIcon" *ngIf="mob_view">
        <div class="row">
          <div class="col-3">
            <div class="cap">
              <button
                class="logoicon"
                mat-fab
                aria-label="profile icon"
                (click)="userDetailsToggle()"
              >
                <img width="25" height="25" [src]="getImage(persona)" />
              </button>
              <button class="circlebtn" type="button" (click)="notifToggle()">
                {{ notifCount }}
              </button>
              <div class="capsule d-none d-md-block">{{ capsuletext }}</div>
            </div>
          </div>
          <div class="col-8"></div>
        </div>
      </div>
      <div class="searchSection" *ngIf="mob_view">
        <img
          (click)="toggleFilterPage(true)"
          src="../assets/Icons/Filter.png"
        />
      </div>
      <div class="addbutton" *ngIf="mob_view">
        <button type="button" class="button_png" (click)="open_form()">
          <img [src]="add_img" style="width: 100%" alt="filter" />
        </button>
      </div>
      <div class="toggle-img" *ngIf="mob_view && hideMap">
        <button type="button" class="button_png_pins" (click)="open_list()">
          <img [src]="toggle_img" style="width: 100%" alt="filter" />
        </button>
      </div>
      <div *ngIf="map_show">
        <div class="row" style="padding: 0.5rem">
          <div
            class="col-lg-12 col-md-12 col-xs-12 center"
            [ngClass]="{ fullHeight: isFilterPageVisible }"
          >
            <app-map #mapview></app-map>
          </div>
        </div>
      </div>
      <app-filterpage
        *ngIf="isFilterPageVisible"
        (onClose)="toggleFilterPage($event)"
      ></app-filterpage>
      <div *ngIf="ifram_show">
        <div id="loadImg">
          <div>
            <img style="width: 100%" src="../assets/Icons/loader.gif" />
          </div>
        </div>
        <iframe
          class="iframe"
          onload="document.getElementById('loadImg').style.display='none';"
          target="_parent"
          frameBorder="0"
          [src]="url"
        ></iframe>
      </div>
      <div class="locationContentSection" *ngIf="list_view">
        <div class="search-results"
        infiniteScroll
        [infiniteScrollDistance]="2"
        [infiniteScrollThrottle]="100"
        (scrolled)="onScrollDown($event)"
        [scrollWindow]="false">
       <!--   <p *ngFor="let i of arraylist">
        {{ i }}

      </p>
    </div> -->
        <div class="container stars-cards">
          <div class="row mt-5 " style="padding: 0.5rem">
            <!-- <div > -->
            <div class="card-columns col-12 "  
            infiniteScroll
            [infiniteScrollDistance]="2"
            [infiniteScrollThrottle]="300"
            (scrolled)="onScrollDown()"
            [scrollWindow]="false"
            
           >
      <!-- <p *ngFor="let i of arraylist">
        {{ i }}

      </p> -->
              <div *ngFor="let m of locationsList; let i = index">
                <app-locationcard
                  (setActiveRemoveitem)="remove_item($event, i)"
                  [categorylist]="categorylist"
                  [cardindex]="i"
                  [info]="m"
                  [share]="share"
                >
                </app-locationcard>
              </div>
            </div>
          </div>
            <footer class="footer"></footer>
          </div>
        </div>
        <div *ngIf="!isFilterPageVisible">
          <div *showItBootstrap="['xs', 'sm']" class="menuSection">
            <app-menubar
              [isMobileView]="true"
              [activeMenu]="activeMenu"
              [menuList]="menuList"
              (setActiveMenu)="setActiveMenuItem($event)"
            ></app-menubar>
          </div>
          <div *showItBootstrap="['md', 'lg', 'xl']" class="largeMenuSection">
            <app-menubar
              (openExternalLink)="openExternalLink($event)"
              [isMobileView]="false"
              [activeMenu]="activeMenu"
              [menuList]="menuList"
              (setActiveMenu)="setActiveMenuItem($event)"
            ></app-menubar>
          </div>
        </div>
      </div>
      <div class="form-group serchmap" *ngIf="mob_view">
        <input
          type="text"
          class="form-control search-formcontrol"
          [(ngModel)]="searchText"
          (keydown.enter)="$event.preventDefault()"
          placeholder="Search Location"
          autocorrect="off"
          autocapitalize="off"
          spellcheck="off"
          type="text"
          #search
        />

        <button id="clear" mat-button mat-icon-button (click)="searchClose()">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>

    <div
      class="text-center gpsOnModel"
      role="document"
      *ngIf="isGpsNotAvailable"
    >
      <p class="gpsOffPopup">Please switch on GPS and then try Reloading</p>
      <button class="btn gpsOnbutton" (click)="dismissNoGpsPopup()">
        Reload
      </button>
      <p class="gpsOffPopup">
        OR <br />
        Go to "Bangalore" to see the Data
      </p>
      <button class="btn gpsOnbutton" (click)="gotobanglore()">Go</button>
    </div>

    <div class="location-msg" *ngIf="spinner_show">
      Loading Data <br />
      Please click the Nav-bar icons to refresh
    </div>
    <div *ngIf="show_subment" class="col-12 float-left linkModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="row subMenu" style="position: relative">
            <div class="col-md-12">
              <div class="col-12" align="right">
                <span
                  ><a (click)="open_external_link()" class="popup-text"
                    >City Dashboard</a
                  >
                  <img
                    [src]="dashboardimgsrc"
                    (click)="open_external_link()"
                    class="popup-icons"
                  />
                </span>
              </div>
              <div class="col-12" align="right">
                <span
                  ><a (click)="open_external_link1()" class="popup-text"
                    >Civic Forum</a
                  >
                  <img
                    [src]="civicimgsrc"
                    (click)="open_external_link1()"
                    class="popup-icons"
                /></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <toaster-container [toasterconfig]="toasterConfig"></toaster-container>
      </div>
    </div>
    <div *ngIf="_router.url === '/userdetails'">
      <app-user-details
        (userStats)="userDetailsClose($event)"
      ></app-user-details>
    </div>
    <div *ngIf="notification">
      <app-notification (notifEvent)="notifClose($event)"></app-notification>
    </div>
  </div>
</div>
<div class="user" *ngIf="_router.url === '/filterpage'">
  <app-filterpage></app-filterpage>
</div>
<div *ngIf="_router.url === '/registration'">
  <app-register></app-register>
</div>
<div *ngIf="_router.url === '/addfunction'">
  <app-addfunction></app-addfunction>
</div>
<div *ngIf="_router.url === '/sniscore'">
  <app-sniscore></app-sniscore>
</div>
<div *ngIf="_router.url.includes('addforms')">
  <app-addforms [id]="UsersId"> </app-addforms>
</div>

<div *ngIf="_router.url.includes('locationcardDetail')">
  <app-location-card-detail [id]="UsersId"></app-location-card-detail>
</div>

<div
  class="admin_sid"
  *ngIf="
    _router.url === '/formbuilder' ||
    _router.url === '/formlist' ||
    _router.url === '/formtypelist'
  "
>
  <div class="row" style="width: 100%">
    <div class="col-md-12">
      <app-admin-header *ngIf="showHeader"></app-admin-header>
    </div>
  </div>
  <div class="row contentWrapper">
    <div class="col-md-2">
      <app-sidebar *ngIf="showSidebar"></app-sidebar>
    </div>
    <div class="col-md-10">
      <router-outlet></router-outlet>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <toaster-container [toasterconfig]="toasterConfig"></toaster-container>
    </div>
  </div>
</div>
<ngx-spinner></ngx-spinner>
